(this.webpackJsonptodo=this.webpackJsonptodo||[]).push([[1],{12:function(t,e,n){t.exports={header:"Header_header__3rkAF",name:"Header_name__1kOkj",items:"Header_items__m1LXD",item:"Header_item__L_pNn",activeLink:"Header_activeLink__3PL36",itemSmall:"Header_itemSmall__2pkRv",logout:"Header_logout__IQ0lr"}},19:function(t,e,n){"use strict";n.d(e,"b",(function(){return p})),n.d(e,"c",(function(){return j})),n.d(e,"d",(function(){return O}));var a=n(5),r=n.n(a),c=n(11),i=n(1),u=n(7),o="SET_USER_DATA",s="GET_CAPTCHA_URL_SUCCESS",d={userId:null,email:null,login:null,isAuth:!1,captchaUrl:null},l=function(t,e,n,a){return{type:o,data:{userId:t,email:e,login:n,isAuth:a}}},f=function(t){return{type:s,data:{captchaUrl:t}}},p=function(){return function(t){return u.a.getAuth().then((function(e){if(0===e.resultCode){var n=e.data,a=n.id,r=n.login,c=n.email;t(l(a,c,r,!0))}}))}},j=function(t,e){return function(){var n=Object(c.a)(r.a.mark((function n(a){var c;return r.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,u.a.login(t);case 2:0===(c=n.sent).resultCode?a(p()):10===c.resultCode?a(b()):e(c.messages[0]);case 4:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}()},b=function(){return function(){var t=Object(c.a)(r.a.mark((function t(e){var n,a;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.b.getCaptchaUrl();case 2:n=t.sent,a=n.url,e(f(a));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},O=function(){return function(){var t=Object(c.a)(r.a.mark((function t(e){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.a.logout();case 2:0===t.sent.resultCode&&e(l(null,null,null,!1));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()};e.a=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case o:case s:return Object(i.a)(Object(i.a)({},t),e.data);default:return t}}},30:function(t,e,n){"use strict";var a=n.p+"static/media/loading.c7d9f081.gif",r=n(2);e.a=function(){return Object(r.jsx)("img",{src:a,alt:"preloader"})}},35:function(t,e,n){"use strict";n.d(e,"h",(function(){return L})),n.d(e,"b",(function(){return D})),n.d(e,"i",(function(){return C})),n.d(e,"a",(function(){return S})),n.d(e,"f",(function(){return E})),n.d(e,"g",(function(){return A})),n.d(e,"d",(function(){return P})),n.d(e,"c",(function(){return N}));var a=n(5),r=n.n(a),c=n(11),i=n(14),u=n(1),o=n(7),s="ADD_TASK",d="DELETE_TASK",l="CHANGE_TASK",f="CHANGE_TODO_LIST",p="SET_TODO_TASKS",j="ADD_TODO_LIST",b="DELETE_TODO_LIST",O="SET_TODO_LISTS",h="TOGGLE_IS_FETCHING",m="SET_TOTAL_PAGES_COUNT",g="CHANGE_PAGE",v={todoLists:[],todoTasks:[{description:"",title:"",completed:!1,status:"",priority:"",startDate:new Date,deadline:new Date,id:"",todoListId:"",order:"",addedDate:""}],isFetching:!1,pageSize:10,totalCount:null,currentPage:1},T=function(t,e){return{type:l,taskId:t,task:e}},y=function(t){return{type:d,taskId:t}},x=function(t){return{type:b,todoListId:t}},_=function(t,e){return{type:f,todoListId:t,title:e}},w=function(t){return{type:h,isFetching:t}},k=function(t){return{type:m,totalCount:t}},L=function(){return function(){var t=Object(c.a)(r.a.mark((function t(e){var n;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e(w(!0)),t.next=3,o.c.getTodoLists();case 3:n=t.sent,e(w(!1)),e({type:O,todoLists:n});case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},D=function(t){return function(){var e=Object(c.a)(r.a.mark((function e(n){var a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.c.addTodoList(t);case 2:0===(a=e.sent).resultCode&&n((r=a.data.item,{type:j,item:r}));case 4:case"end":return e.stop()}var r}),e)})));return function(t){return e.apply(this,arguments)}}()},C=function(t,e,n){return function(){var a=Object(c.a)(r.a.mark((function a(c){var i;return r.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return c({type:g,page:e}),a.next=3,o.c.getTodoTasks(t,e,n);case 3:i=a.sent,c(w(!0)),c((r=i.items,{type:p,todoTasks:r})),c(k(i.totalCount));case 7:case"end":return a.stop()}var r}),a)})));return function(t){return a.apply(this,arguments)}}()},S=function(t,e,n){return function(){var a=Object(c.a)(r.a.mark((function a(c,i){var u,d,l,f;return r.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,o.c.addTask(t,e);case 2:u=a.sent,d=n+1,l=i().todoPage.pageSize,0===u.resultCode&&((f=u.data.item).description="\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435",f.completed=!1,f.status=0,f.priority=3,f.startDate=new Date,f.deadline=new Date(+new Date+864e5),c({type:s,item:f}),c(k(d)),c(N(f.todoListId,f.id,f)),c(C(t,1,l)));case 6:case"end":return a.stop()}}),a)})));return function(t,e){return a.apply(this,arguments)}}()},E=function(t,e,n,a,i){return function(){var a=Object(c.a)(r.a.mark((function a(c){var u,s;return r.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return u=n-1,a.next=3,o.c.deleteTask(t,e);case 3:0===a.sent.resultCode&&(c(y(e)),c(k(u)),u%10===0&&(s=Math.ceil(u/i),c(C(t,s,i))));case 5:case"end":return a.stop()}}),a)})));return function(t){return a.apply(this,arguments)}}()},A=function(t){return function(){var e=Object(c.a)(r.a.mark((function e(n){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.c.deleteTodoList(t);case 2:0===e.sent.resultCode&&n(x(t));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},P=function(t,e){return function(){var n=Object(c.a)(r.a.mark((function n(a){return r.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,o.c.changeTodoList(t,e);case 2:0===n.sent.resultCode&&a(_(t,e));case 4:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}()},N=function(t,e,n){return function(){var a=Object(c.a)(r.a.mark((function a(c){var i;return r.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,o.c.changeTask(t,e,Object(u.a)({},n));case 2:0===(i=a.sent).resultCode&&c(T(e,i.data.item));case 4:case"end":return a.stop()}}),a)})));return function(t){return a.apply(this,arguments)}}()};e.e=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case s:return Object(u.a)(Object(u.a)({},t),{},{todoTasks:[e.item].concat(Object(i.a)(t.todoTasks.slice(0,9)))});case d:return Object(u.a)(Object(u.a)({},t),{},{todoTasks:Object(i.a)(t.todoTasks.filter((function(t){return t.id!==e.taskId})))});case l:return Object(u.a)(Object(u.a)({},t),{},{todoTasks:Object(i.a)(t.todoTasks.map((function(t){return t.id===e.taskId&&(t=e.task),t})))});case p:return Object(u.a)(Object(u.a)({},t),{},{todoTasks:e.todoTasks});case j:return Object(u.a)(Object(u.a)({},t),{},{todoLists:[e.item].concat(Object(i.a)(t.todoLists))});case b:return Object(u.a)(Object(u.a)({},t),{},{todoLists:Object(i.a)(t.todoLists.filter((function(t){return t.id!==e.todoListId})))});case f:return Object(u.a)(Object(u.a)({},t),{},{todoLists:Object(i.a)(t.todoLists.map((function(t){return t.id===e.todoListId&&(t.title=e.title),t})))});case O:return Object(u.a)(Object(u.a)({},t),{},{todoLists:e.todoLists});case h:return Object(u.a)(Object(u.a)({},t),{},{isFetching:e.isFetching});case m:return Object(u.a)(Object(u.a)({},t),{},{totalCount:e.totalCount});case g:return Object(u.a)(Object(u.a)({},t),{},{currentPage:e.page});default:return t}}},44:function(t,e,n){"use strict";n.d(e,"d",(function(){return p})),n.d(e,"e",(function(){return j})),n.d(e,"c",(function(){return b})),n.d(e,"a",(function(){return O}));var a=n(14),r=n(1),c=function(t){var e=JSON.stringify(t);localStorage.setItem("payments",e)},i=function(){var t=localStorage.getItem("payments");return t?JSON.parse(t):[]},u="ADD_PAYMENT",o="UPDATE_PAYMENT_TEXT",s="UPDATE_PAYMENT_COST",d="SET_PAYMENTS",l=function(t){return t<10&&(t="0"+t),t},f={paymentsData:[],newPaymentText:"",newPaymentCost:0},p=function(t){return{type:o,text:t}},j=function(t){return{type:s,num:t}},b=function(){return function(t){t(function(t){return{type:d,items:t}}(i()))}},O=function(){return function(t,e){t({type:u});var n=e().paymentsPage.paymentsData;c(n)}};e.b=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case d:return Object(r.a)(Object(r.a)({},t),{},{paymentsData:e.items});case u:var n={id:7,payment:t.newPaymentText,category:"home",cost:t.newPaymentCost},c=new Date,i=l(c.getDate())+"."+l(c.getMonth()+1)+"."+c.getFullYear(),p=t.paymentsData.find((function(t){return t.date===i}));return p?Object(r.a)(Object(r.a)({},t),{},{paymentsData:t.paymentsData.map((function(t){return t.date===i&&t.payments.push(n),Object(r.a)(Object(r.a)({},t),{},{payments:t.payments.map((function(t){return Object(r.a)({},t)}))})})),newPaymentCost:0}):Object(r.a)(Object(r.a)({},t),{},{paymentsData:[].concat(Object(a.a)(t.paymentsData),[{date:i,payments:[n]}]),newPaymentCost:0});case o:return Object(r.a)(Object(r.a)({},t),{},{newPaymentText:e.text});case s:return Object(r.a)(Object(r.a)({},t),{},{newPaymentCost:e.num});default:return t}}},52:function(t,e,n){},56:function(t,e,n){},7:function(t,e,n){"use strict";n.d(e,"c",(function(){return u})),n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return s}));var a=n(1),r="https://social-network.samuraijs.com/api/1.1/",c="be208add-76be-474f-b426-6fa8679c0152",i=n(45).create({withCredentials:!0,baseURL:r,headers:{"API-KEY":c}}),u={getTodoLists:function(){return i.get("todo-lists").then((function(t){return t.data}))},getTodoTasks:function(t,e,n){return i.get("todo-lists/"+t+"/tasks?page=".concat(e,"&count=").concat(n)).then((function(t){return t.data.items.map((function(t){return t.startDate=null===t.startDate?new Date:new Date(t.startDate+"Z"),t.deadline=null===t.deadline?new Date:new Date(t.deadline+"Z"),Object(a.a)({},t)})),t.data}))},addTodoList:function(t){return i.post("todo-lists",{title:t}).then((function(t){return t.data}))},deleteTodoList:function(t){return i.delete("todo-lists/"+t).then((function(t){return t.data}))},changeTodoList:function(t,e){return i.put("todo-lists/"+t,{title:e}).then((function(t){return t.data}))},addTask:function(t,e){return i.post("todo-lists/"+t+"/tasks",{title:e}).then((function(t){return t.data}))},deleteTask:function(t,e){return i.delete("todo-lists/"+t+"/tasks/"+e).then((function(t){return t.data}))},changeTask:function(t,e,n){return i.put("todo-lists/"+t+"/tasks/"+e,{title:n.title,description:n.description,completed:n.completed,status:n.status,priority:n.priority,startDate:n.startDate,deadline:n.deadline}).then((function(t){return t.data.data.item.startDate=new Date(t.data.data.item.startDate),t.data.data.item.deadline=new Date(t.data.data.item.deadline),t.data}))}},o={getAuth:function(){return i.get("auth/me").then((function(t){return t.data}))},login:function(t){return i.post("auth/login",{email:t.email,password:t.password,rememberMe:t.rememberMe,captcha:t.captcha}).then((function(t){return t.data}))},logout:function(){return i.delete("auth/login").then((function(t){return t.data}))}},s={getCaptchaUrl:function(){return i.get("security/get-captcha-url").then((function(t){return t.data}))}}},78:function(t,e,n){"use strict";n.r(e);var a=n(0),r=n.n(a),c=n(26),i=n.n(c),u=(n(52),n(22)),o=n(23),s=n(25),d=n(24),l=n(18),f=n(3),p=n(16),j=(n(56),n(30)),b=n(1),O=n(19),h=n(15),m=n(12),g=n.n(m),v=n(2),T=function(t){return Object(v.jsxs)("header",{className:g.a.header,children:[Object(v.jsx)("div",{className:g.a.itemSmall,children:t.isAuth?Object(v.jsxs)("div",{children:[t.login,Object(v.jsx)("div",{className:g.a.logout,onClick:function(){t.logout()},children:"Logout"})]}):Object(v.jsx)(h.b,{to:"/Login",activeClassName:g.a.activeLink,children:"Login"})}),Object(v.jsx)("div",{className:g.a.itemSmall,children:Object(v.jsx)(h.b,{to:"/Settings",activeClassName:g.a.activeLink,children:"Settings"})}),Object(v.jsx)("div",{className:g.a.name,children:"Trata"}),Object(v.jsxs)("div",{className:g.a.items,children:[Object(v.jsx)("div",{className:g.a.item,children:Object(v.jsx)(h.b,{to:"/TodoLists",activeClassName:g.a.activeLink,children:"Todo"})}),Object(v.jsx)("div",{className:g.a.item,children:Object(v.jsx)(h.b,{to:"/Payments",activeClassName:g.a.activeLink,children:"\u0420\u0430\u0441\u0445\u043e\u0434\u044b"})})]})]})},y=function(t){Object(s.a)(n,t);var e=Object(d.a)(n);function n(){return Object(u.a)(this,n),e.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){return Object(v.jsx)(T,Object(b.a)({},this.props))}}]),n}(r.a.Component),x=Object(l.b)((function(t){return{isAuth:t.auth.isAuth,login:t.auth.login}}),(function(t){return{logout:function(){t(Object(O.d)())}}}))(y),_="INITIALIZED_SUCCESS",w={initialized:!1},k=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case _:return Object(b.a)(Object(b.a)({},t),{},{initialized:!0});default:return t}},L=r.a.lazy((function(){return Promise.all([n.e(0),n.e(4),n.e(6)]).then(n.bind(null,149))})),D=r.a.lazy((function(){return Promise.all([n.e(0),n.e(5)]).then(n.bind(null,150))})),C=r.a.lazy((function(){return n.e(7).then(n.bind(null,151))})),S=r.a.lazy((function(){return n.e(9).then(n.bind(null,147))})),E=r.a.lazy((function(){return Promise.all([n.e(0),n.e(8)]).then(n.bind(null,152))})),A=function(t){Object(s.a)(n,t);var e=Object(d.a)(n);function n(){return Object(u.a)(this,n),e.apply(this,arguments)}return Object(o.a)(n,[{key:"componentDidMount",value:function(){this.props.initializeApp()}},{key:"render",value:function(){return this.props.initialized?Object(v.jsxs)("div",{className:"app-wrapper",children:[Object(v.jsx)(x,{}),Object(v.jsx)("div",{className:"app-wrapper-content",children:Object(v.jsx)(a.Suspense,{fallback:Object(v.jsx)(j.a,{}),children:Object(v.jsxs)(f.d,{children:[Object(v.jsx)(f.b,{exact:!0,path:"/",render:function(){return Object(v.jsx)(f.a,{to:"/TodoLists"})}}),Object(v.jsx)(f.b,{path:"/TodoLists",render:function(){return Object(v.jsx)(D,{})}}),Object(v.jsx)(f.b,{path:"/Todo/:todoListId",render:function(){return Object(v.jsx)(L,{})}}),Object(v.jsx)(f.b,{path:"/Payments",render:function(){return Object(v.jsx)(C,{})}}),Object(v.jsx)(f.b,{path:"/Settings",render:function(){return Object(v.jsx)(S,{})}}),Object(v.jsx)(f.b,{path:"/Login",render:function(){return Object(v.jsx)(E,{})}}),Object(v.jsx)(f.b,{path:"*",render:function(){return Object(v.jsx)("div",{children:"NOT FOUND"})}})]})})})]}):Object(v.jsx)(j.a,{})}}]),n}(r.a.Component),P=Object(p.c)(f.g,Object(l.b)((function(t){return{initialized:t.app.initialized}}),{initializeApp:function(){return function(t){var e=t(Object(O.b)());Promise.all([e]).then((function(){t({type:_})}))}}}))(A),N=function(t){t&&t instanceof Function&&n.e(10).then(n.bind(null,148)).then((function(e){var n=e.getCLS,a=e.getFID,r=e.getFCP,c=e.getLCP,i=e.getTTFB;n(t),a(t),r(t),c(t),i(t)}))},I=n(44),z=n(35),U=n(46),F=Object(p.b)({todoPage:z.e,paymentsPage:I.b,auth:O.a,app:k}),H=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||p.c,M=Object(p.d)(F,H(Object(p.a)(U.a))),G=M;window.store=M,i.a.render(Object(v.jsx)(h.a,{children:Object(v.jsx)(r.a.StrictMode,{children:Object(v.jsx)(l.a,{store:G,children:Object(v.jsx)(P,{})})})}),document.getElementById("root")),N()}},[[78,2,3]]]);
//# sourceMappingURL=main.9257dc84.chunk.js.map