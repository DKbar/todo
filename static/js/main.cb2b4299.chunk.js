(this.webpackJsonptodo=this.webpackJsonptodo||[]).push([[1],{12:function(t,e,n){t.exports={header:"Header_header__3rkAF",name:"Header_name__1kOkj",items:"Header_items__m1LXD",item:"Header_item__L_pNn",activeLink:"Header_activeLink__3PL36",itemSmall:"Header_itemSmall__2pkRv",logout:"Header_logout__IQ0lr"}},19:function(t,e,n){"use strict";n.d(e,"b",(function(){return p})),n.d(e,"c",(function(){return j})),n.d(e,"d",(function(){return h}));var a=n(5),r=n.n(a),c=n(11),i=n(1),o=n(7),u="SET_USER_DATA",s="GET_CAPTCHA_URL_SUCCESS",d={userId:null,email:null,login:null,isAuth:!1,captchaUrl:null},l=function(t,e,n,a){return{type:u,data:{userId:t,email:e,login:n,isAuth:a}}},f=function(t){return{type:s,data:{captchaUrl:t}}},p=function(){return function(t){return o.a.getAuth().then((function(e){if(0===e.resultCode){var n=e.data,a=n.id,r=n.login,c=n.email;t(l(a,c,r,!0))}}))}},j=function(t,e){return function(){var n=Object(c.a)(r.a.mark((function n(a){var c;return r.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,o.a.login(t);case 2:0===(c=n.sent).resultCode?a(p()):10===c.resultCode?a(b()):e(c.messages[0]);case 4:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}()},b=function(){return function(){var t=Object(c.a)(r.a.mark((function t(e){var n,a;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.b.getCaptchaUrl();case 2:n=t.sent,a=n.url,e(f(a));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},h=function(){return function(){var t=Object(c.a)(r.a.mark((function t(e){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.a.logout();case 2:0===t.sent.resultCode&&e(l(null,null,null,!1));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()};e.a=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case u:case s:return Object(i.a)(Object(i.a)({},t),e.data);default:return t}}},30:function(t,e,n){"use strict";var a=n.p+"static/media/loading.c7d9f081.gif",r=n(2);e.a=function(){return Object(r.jsx)("img",{src:a,alt:"preloader"})}},35:function(t,e,n){"use strict";n.d(e,"h",(function(){return L})),n.d(e,"b",(function(){return D})),n.d(e,"i",(function(){return C})),n.d(e,"a",(function(){return S})),n.d(e,"f",(function(){return E})),n.d(e,"g",(function(){return A})),n.d(e,"d",(function(){return P})),n.d(e,"c",(function(){return I}));var a=n(5),r=n.n(a),c=n(11),i=n(14),o=n(1),u=n(7),s="ADD_TASK",d="DELETE_TASK",l="CHANGE_TASK",f="CHANGE_TODO_LIST",p="SET_TODO_TASKS",j="ADD_TODO_LIST",b="DELETE_TODO_LIST",h="SET_TODO_LISTS",O="TOGGLE_IS_FETCHING",m="SET_TOTAL_PAGES_COUNT",y="CHANGE_PAGE",g={todoLists:[],todoTasks:[{description:"",title:"",completed:"",status:"",priority:"",startDate:new Date,deadline:new Date,id:"",todoListId:"",order:"",addedDate:""}],isFetching:!1,pageSize:10,totalCount:null,currentPage:1},v=function(t,e){return{type:l,taskId:t,task:e}},T=function(t){return{type:d,taskId:t}},x=function(t){return{type:b,todoListId:t}},_=function(t,e){return{type:f,todoListId:t,title:e}},k=function(t){return{type:O,isFetching:t}},w=function(t){return{type:m,totalCount:t}},L=function(){return function(){var t=Object(c.a)(r.a.mark((function t(e){var n;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e(k(!0)),t.next=3,u.c.getTodoLists();case 3:n=t.sent,e(k(!1)),e({type:h,todoLists:n});case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},D=function(t){return function(){var e=Object(c.a)(r.a.mark((function e(n){var a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.c.addTodoList(t);case 2:0===(a=e.sent).resultCode&&n((r=a.data.item,{type:j,item:r}));case 4:case"end":return e.stop()}var r}),e)})));return function(t){return e.apply(this,arguments)}}()},C=function(t,e,n){return function(){var a=Object(c.a)(r.a.mark((function a(c){var i;return r.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return c({type:y,page:e}),a.next=3,u.c.getTodoTasks(t,e,n);case 3:i=a.sent,c(k(!0)),c((r=i.items,{type:p,todoTasks:r})),c(w(i.totalCount));case 7:case"end":return a.stop()}var r}),a)})));return function(t){return a.apply(this,arguments)}}()},S=function(t,e,n){return function(){var a=Object(c.a)(r.a.mark((function a(c,i){var o,d,l,f;return r.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,u.c.addTask(t,e);case 2:o=a.sent,d=n+1,l=i().todoPage.pageSize,0===o.resultCode&&((f=o.data.item).description="\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435",f.completed=!1,f.status=0,f.priority=3,f.startDate=new Date,f.deadline=new Date(+new Date+864e5),c({type:s,item:f}),c(w(d)),c(I(f.todoListId,f.id,f)),c(C(t,1,l)));case 6:case"end":return a.stop()}}),a)})));return function(t,e){return a.apply(this,arguments)}}()},E=function(t,e,n,a,i){return function(){var a=Object(c.a)(r.a.mark((function a(c){var o,s;return r.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return o=n-1,a.next=3,u.c.deleteTask(t,e);case 3:0===a.sent.resultCode&&(c(T(e)),c(w(o)),o%10===0&&(s=Math.ceil(o/i),c(C(t,s,i))));case 5:case"end":return a.stop()}}),a)})));return function(t){return a.apply(this,arguments)}}()},A=function(t){return function(){var e=Object(c.a)(r.a.mark((function e(n){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.c.deleteTodoList(t);case 2:0===e.sent.resultCode&&n(x(t));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},P=function(t,e){return function(){var n=Object(c.a)(r.a.mark((function n(a){return r.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,u.c.changeTodoList(t,e);case 2:0===n.sent.resultCode&&a(_(t,e));case 4:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}()},I=function(t,e,n){return function(){var a=Object(c.a)(r.a.mark((function a(c){var i;return r.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,u.c.changeTask(t,e,Object(o.a)({},n));case 2:0===(i=a.sent).resultCode&&c(v(e,i.data.item));case 4:case"end":return a.stop()}}),a)})));return function(t){return a.apply(this,arguments)}}()};e.e=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case s:return Object(o.a)(Object(o.a)({},t),{},{todoTasks:[e.item].concat(Object(i.a)(t.todoTasks.slice(0,9)))});case d:return Object(o.a)(Object(o.a)({},t),{},{todoTasks:Object(i.a)(t.todoTasks.filter((function(t){return t.id!==e.taskId})))});case l:return Object(o.a)(Object(o.a)({},t),{},{todoTasks:Object(i.a)(t.todoTasks.map((function(t){return t.id===e.taskId&&(t=e.task),t})))});case p:return Object(o.a)(Object(o.a)({},t),{},{todoTasks:e.todoTasks});case j:return Object(o.a)(Object(o.a)({},t),{},{todoLists:[e.item].concat(Object(i.a)(t.todoLists))});case b:return Object(o.a)(Object(o.a)({},t),{},{todoLists:Object(i.a)(t.todoLists.filter((function(t){return t.id!==e.todoListId})))});case f:return Object(o.a)(Object(o.a)({},t),{},{todoLists:Object(i.a)(t.todoLists.map((function(t){return t.id===e.todoListId&&(t.title=e.title),t})))});case h:return Object(o.a)(Object(o.a)({},t),{},{todoLists:e.todoLists});case O:return Object(o.a)(Object(o.a)({},t),{},{isFetching:e.isFetching});case m:return Object(o.a)(Object(o.a)({},t),{},{totalCount:e.totalCount});case y:return Object(o.a)(Object(o.a)({},t),{},{currentPage:e.page});default:return t}}},44:function(t,e,n){"use strict";n.d(e,"c",(function(){return d})),n.d(e,"d",(function(){return l})),n.d(e,"b",(function(){return f}));var a=n(14),r=n(1),c="ADD_PAYMENT",i="UPDATE_PAYMENT_TEXT",o="UPDATE_PAYMENT_COST",u=function(t){return t<10&&(t="0"+t),t},s={paymentsData:[{date:"15.03.2021",payments:[{id:1,payment:"payment1",category:"home",cost:50},{id:2,payment:"payment2",category:"home",cost:15}]},{date:"11.06.2021",payments:[{id:3,payment:"payment3",category:"car",cost:150},{id:4,payment:"payment4",category:"car",cost:75}]}],newPaymentText:"",newPaymentCost:0},d=function(t){return{type:i,text:t}},l=function(t){return{type:o,num:t}},f=function(){return{type:c}};e.a=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case c:var n={id:7,payment:t.newPaymentText,category:"home",cost:t.newPaymentCost},d=new Date,l=u(d.getDate())+"."+u(d.getMonth()+1)+"."+d.getFullYear(),f=t.paymentsData.find((function(t){return t.date===l}));return f?Object(r.a)(Object(r.a)({},t),{},{paymentsData:t.paymentsData.map((function(t){return t.date===l&&t.payments.push(n),Object(r.a)(Object(r.a)({},t),{},{payments:t.payments.map((function(t){return Object(r.a)({},t)}))})})),newPaymentCost:0}):Object(r.a)(Object(r.a)({},t),{},{paymentsData:[].concat(Object(a.a)(t.paymentsData),[{date:l,payments:[n]}]),newPaymentCost:0});case i:return Object(r.a)(Object(r.a)({},t),{},{newPaymentText:e.text});case o:return Object(r.a)(Object(r.a)({},t),{},{newPaymentCost:e.num});default:return t}}},52:function(t,e,n){},56:function(t,e,n){},7:function(t,e,n){"use strict";n.d(e,"c",(function(){return o})),n.d(e,"a",(function(){return u})),n.d(e,"b",(function(){return s}));var a=n(1),r="https://social-network.samuraijs.com/api/1.1/",c="be208add-76be-474f-b426-6fa8679c0152",i=n(45).create({withCredentials:!0,baseURL:r,headers:{"API-KEY":c}}),o={getTodoLists:function(){return i.get("todo-lists").then((function(t){return t.data}))},getTodoTasks:function(t,e,n){return i.get("todo-lists/"+t+"/tasks?page=".concat(e,"&count=").concat(n)).then((function(t){return t.data.items.map((function(t){return t.startDate=new Date(t.startDate+"Z"),t.deadline=new Date(t.deadline+"Z"),Object(a.a)({},t)})),t.data}))},addTodoList:function(t){return i.post("todo-lists",{title:t}).then((function(t){return t.data}))},deleteTodoList:function(t){return i.delete("todo-lists/"+t).then((function(t){return t.data}))},changeTodoList:function(t,e){return i.put("todo-lists/"+t,{title:e}).then((function(t){return t.data}))},addTask:function(t,e){return i.post("todo-lists/"+t+"/tasks",{title:e}).then((function(t){return t.data}))},deleteTask:function(t,e){return i.delete("todo-lists/"+t+"/tasks/"+e).then((function(t){return t.data}))},changeTask:function(t,e,n){return i.put("todo-lists/"+t+"/tasks/"+e,{title:n.title,description:n.description,status:n.status,priority:n.priority,startDate:n.startDate,deadline:n.deadline}).then((function(t){return t.data.data.item.startDate=new Date(t.data.data.item.startDate),t.data.data.item.deadline=new Date(t.data.data.item.deadline),t.data}))}},u={getAuth:function(){return i.get("auth/me").then((function(t){return t.data}))},login:function(t){return i.post("auth/login",{email:t.email,password:t.password,rememberMe:t.rememberMe,captcha:t.captcha}).then((function(t){return t.data}))},logout:function(){return i.delete("auth/login").then((function(t){return t.data}))}},s={getCaptchaUrl:function(){return i.get("security/get-captcha-url").then((function(t){return t.data}))}}},78:function(t,e,n){"use strict";n.r(e);var a=n(0),r=n.n(a),c=n(26),i=n.n(c),o=(n(52),n(22)),u=n(23),s=n(25),d=n(24),l=n(18),f=n(4),p=n(16),j=(n(56),n(30)),b=n(1),h=n(19),O=n(15),m=n(12),y=n.n(m),g=n(2),v=function(t){return Object(g.jsxs)("header",{className:y.a.header,children:[Object(g.jsx)("div",{className:y.a.itemSmall,children:t.isAuth?Object(g.jsxs)("div",{children:[t.login,Object(g.jsx)("div",{className:y.a.logout,onClick:function(){t.logout()},children:"Logout"})]}):Object(g.jsx)(O.b,{to:"/Login",activeClassName:y.a.activeLink,children:"Login"})}),Object(g.jsx)("div",{className:y.a.itemSmall,children:Object(g.jsx)(O.b,{to:"/Settings",activeClassName:y.a.activeLink,children:"Settings"})}),Object(g.jsx)("div",{className:y.a.name,children:"Trata"}),Object(g.jsxs)("div",{className:y.a.items,children:[Object(g.jsx)("div",{className:y.a.item,children:Object(g.jsx)(O.b,{to:"/TodoLists",activeClassName:y.a.activeLink,children:"Todo"})}),Object(g.jsx)("div",{className:y.a.item,children:Object(g.jsx)(O.b,{to:"/Payments",activeClassName:y.a.activeLink,children:"\u0420\u0430\u0441\u0445\u043e\u0434\u044b"})})]})]})},T=function(t){Object(s.a)(n,t);var e=Object(d.a)(n);function n(){return Object(o.a)(this,n),e.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){return Object(g.jsx)(v,Object(b.a)({},this.props))}}]),n}(r.a.Component),x=Object(l.b)((function(t){return{isAuth:t.auth.isAuth,login:t.auth.login}}),(function(t){return{logout:function(){t(Object(h.d)())}}}))(T),_="INITIALIZED_SUCCESS",k={initialized:!1},w=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case _:return Object(b.a)(Object(b.a)({},t),{},{initialized:!0});default:return t}},L=r.a.lazy((function(){return Promise.all([n.e(0),n.e(4),n.e(6)]).then(n.bind(null,149))})),D=r.a.lazy((function(){return Promise.all([n.e(0),n.e(5)]).then(n.bind(null,150))})),C=r.a.lazy((function(){return n.e(7).then(n.bind(null,151))})),S=r.a.lazy((function(){return n.e(9).then(n.bind(null,147))})),E=r.a.lazy((function(){return Promise.all([n.e(0),n.e(8)]).then(n.bind(null,152))})),A=function(t){Object(s.a)(n,t);var e=Object(d.a)(n);function n(){return Object(o.a)(this,n),e.apply(this,arguments)}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.props.initializeApp()}},{key:"render",value:function(){return this.props.initialized?Object(g.jsxs)("div",{className:"app-wrapper",children:[Object(g.jsx)(x,{}),Object(g.jsx)("div",{className:"app-wrapper-content",children:Object(g.jsxs)(a.Suspense,{fallback:Object(g.jsx)(j.a,{}),children:[Object(g.jsx)(f.b,{path:"/TodoLists",render:function(){return Object(g.jsx)(D,{})}}),Object(g.jsx)(f.b,{path:"/Todo/:todoListId",render:function(){return Object(g.jsx)(L,{})}}),Object(g.jsx)(f.b,{path:"/Payments",render:function(){return Object(g.jsx)(C,{})}}),Object(g.jsx)(f.b,{path:"/Settings",render:function(){return Object(g.jsx)(S,{})}}),Object(g.jsx)(f.b,{path:"/Login",render:function(){return Object(g.jsx)(E,{})}})]})})]}):Object(g.jsx)(j.a,{})}}]),n}(r.a.Component),P=Object(p.c)(f.f,Object(l.b)((function(t){return{initialized:t.app.initialized}}),{initializeApp:function(){return function(t){var e=t(Object(h.b)());Promise.all([e]).then((function(){t({type:_})}))}}}))(A),I=function(t){t&&t instanceof Function&&n.e(10).then(n.bind(null,148)).then((function(e){var n=e.getCLS,a=e.getFID,r=e.getFCP,c=e.getLCP,i=e.getTTFB;n(t),a(t),r(t),c(t),i(t)}))},N=n(44),z=n(35),U=n(46),H=Object(p.b)({todoPage:z.e,paymentsPage:N.a,auth:h.a,app:w}),F=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||p.c,M=Object(p.d)(H,F(Object(p.a)(U.a))),G=M;window.store=M,i.a.render(Object(g.jsx)(O.a,{children:Object(g.jsx)(r.a.StrictMode,{children:Object(g.jsx)(l.a,{store:G,children:Object(g.jsx)(P,{})})})}),document.getElementById("root")),I()}},[[78,2,3]]]);
//# sourceMappingURL=main.cb2b4299.chunk.js.map